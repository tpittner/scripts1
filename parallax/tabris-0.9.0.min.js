/*!
 * tabris.js 2015-01-23
 * 
 * Copyright (c) 2014, 2015 EclipseSource Inc.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice,
 *   this list of conditions and the following disclaimer in the documentation
 *   and/or other materials provided with the distribution.
 * 
 * * Neither the name of tabris.js nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
util={extend:function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a},pick:function(a,b){var c={};for(var d in a)-1!==b.indexOf(d)&&(c[d]=a[d]);return c},omit:function(a,b){var c={};for(var d in a)-1===b.indexOf(d)&&(c[d]=a[d]);return c},clone:function(a){var b={};for(var c in a)b[c]=a[c];return b},rename:function(a,b){var c={};for(var d in a)c[b[d]||d]=a[d];return c},invert:function(a){var b={};for(var c in a)b[a[c]]=c;return b},bind:function(a,b){return function(){return a.apply(b,arguments)}},extendPrototype:function(a,b){var c=function(){};return c.prototype=a.prototype,util.extend(new c,b,{"super":function(b){return a.prototype[b].apply(this,Array.prototype.slice.call(arguments,1))}})}},function(){util.colorArrayToString=function(a){var b=a[0],c=a[1],d=a[2],e=3===a.length?1:Math.round(100*a[3]/255)/100;return"rgba("+b+", "+c+", "+d+", "+e+")"},util.colorStringToArray=function(b){if("transparent"===b)return[0,0,0,0];if(/^#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/.test(b))return[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16),255];if(/^#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/.test(b))return[17*parseInt(RegExp.$1,16),17*parseInt(RegExp.$2,16),17*parseInt(RegExp.$3,16),255];if(/^rgb\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*\)$/.test(b))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),255];if(/^rgba\s*\(\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?[0-9]+)\s*,\s*([+\-]?([0-9]*\.)?[0-9]+)\s*\)$/.test(b))return[Math.max(0,Math.min(255,parseInt(RegExp.$1))),Math.max(0,Math.min(255,parseInt(RegExp.$2))),Math.max(0,Math.min(255,parseInt(RegExp.$3))),Math.round(255*Math.max(0,Math.min(1,parseFloat(RegExp.$4))))];if(b in a){var c=a[b];return[c[0],c[1],c[2],255]}throw new Error("invalid color: "+b)};var a={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]}}(),function(){util.fontStringToArray=function(d){var e=[[],0,!1,!1],f=d.split(/(?:\s|^)\d+px(?:\s|$)/);return c(2===f.length||1===f.length,"Invalid font syntax"),e[1]=parseInt(/(?:\s|^)(\d+)px(?:\s|$)/.exec(d)[1],10),a(e,f[0]),b(e,f[1]),e},util.fontArrayToString=function(a){return(a[3]?"italic ":"")+(a[2]?"bold ":"")+(a[1]+"px")+(a[0][0]?" ":"")+a[0].join(", ")};var a=function(a,b){var d=b.trim().split(/\s+/);c(d.length<=2,"Too many font styles"),d.forEach(function(b){switch(b.trim()){case"italic":c(a[3]===!1,"Invalid font variant"),a[3]=!0;break;case"bold":c(a[2]===!1,"Invalid font weight"),a[2]=!0;break;case"normal":case"":break;default:throw new Error("Unknown font property: "+b.trim())}})},b=function(a,b){(b?b.split(","):[]).forEach(function(b){var d=/(?:^\s*[^\"\']+\s*$)|(?:^\s*\"[^\"\']+\"\s*$)|(?:^\s*\'[^\"\']+\'\s*$)/.exec(b);c(d,"Invalid font family: "+b),a[0].push(/^\s*[\"\']?([^\"\']*)/.exec(b)[1].trim())})},c=function(a,b){if(!a)throw new Error(b)}}(),function(){function a(a){return null!=a?a:null}util.imageToArray=function(b){return[b.src,a(b.width),a(b.height),a(b.scale)]},util.imageFromArray=function(a){var b={src:a[0]};return a.length>1&&(b.width=a[1]),a.length>2&&(b.height=a[2]),a.length>3&&(b.scale=a[3]),b}}(),function(){function a(a){var c=b[a];return c instanceof Object?util.clone(c):c}tabris=util.extend(function(a){if(!tabris._proxies[a]&&!tabris[a])throw new Error("No native object with id or type "+a);var b=tabris[a]&&tabris[a]._type?tabris[a]._type:a;return b in tabris._proxies?tabris._proxies[b]:new tabris[a](b)},{_loadFunctions:[],_proxies:{},_ready:!1,load:function(a){tabris._ready?a.call():tabris._loadFunctions.push(a)},create:function(a,b){if(!tabris._nativeBridge)throw new Error("tabris.js not started");if(!(a in tabris))throw new Error("Unknown type "+a);return tabris[a].prototype.type!==a&&console.warn('"'+a+'" is deprecated, use "'+tabris[a].prototype.type+'"'),(new tabris[a])._create(b||{})},registerType:function(c,d){if(c in tabris)throw new Error("Type already registered: "+c);tabris[c]=function(){tabris.Proxy.apply(this,arguments)};for(var e in b)tabris[c][e]=d[e]||a(e);var f=util.omit(d,Object.keys(b));f.type=c,f.constructor=tabris[c],tabris[c].prototype=util.extendPrototype(tabris.Proxy,f)},version:"0.9.0",_start:function(a){tabris._nativeBridge=new tabris.NativeBridge(a);for(var b=0;b<tabris._loadFunctions.length;)tabris._loadFunctions[b++].call();tabris._ready=!0,tabris._entryPoint?(tabris._entryPoint(),delete tabris._entryPoint):tabris.Module.loadMain(),tabris.trigger("flush")},_setEntryPoint:function(a){this._entryPoint=a},_notify:function(a,b,c){var d=tabris._proxies[a];if(d)try{d._trigger(b,c)}catch(e){console.error(e),console.log(e.stack)}tabris.trigger("flush")},_reset:function(){this._loadFunctions=[],this._proxies={}}});var b={_trigger:{},_listen:{},_setProperty:{},_getProperty:{},_initProperties:{},_type:null,_properties:{},_supportsChildren:!1}}(),function(){tabris.NativeBridge=function(a){this._bridge=a,this._operations=[],this._currentOperation={id:null},tabris.on("flush",this.flush,this)},tabris.NativeBridge.prototype={create:function(a,b){var c={};this._operations.push(["create",a,b,c]),this._currentOperation={id:a,properties:c}},set:function(a,b,c){if(this._currentOperation.id===a)this._currentOperation.properties[b]=c;else{var d={};d[b]=c,this._operations.push(["set",a,d]),this._currentOperation={id:a,properties:d}}},listen:function(a,b,c){this._operations.push(["listen",a,b,c]),this._currentOperation={id:null}},destroy:function(a){this._operations.push(["destroy",a]),this._currentOperation={id:null}},get:function(a,b){return this._operations.push(["get",a,b]),this.flush()},call:function(a,b,c){return this._operations.push(["call",a,b,c]),this.flush()},flush:function(){var a=this._operations;this._operations=[],this._currentOperation={id:null};for(var b=a.length,c=0;b>c;c++){var d=a[c];switch(d[0]){case"create":this._bridge.create(d[1],d[2],d[3]);break;case"set":this._bridge.set(d[1],d[2]);break;case"listen":this._bridge.listen(d[1],d[2],d[3]);break;case"destroy":this._bridge.destroy(d[1]);break;case"get":return this._bridge.get(d[1],d[2]);case"call":return this._bridge.call(d[1],d[2],d[3])}}}}}(),tabris.Events={on:function(a,b,c){return this._callbacks||(this._callbacks=[]),this._callbacks[a]=(this._callbacks[a]||[]).concat([{fn:b,ctx:c}]),this},off:function(a,b,c){if(this._callbacks)if(a){if(a in this._callbacks)if(b){for(var d=this._callbacks[a].concat(),e=d.length-1;e>=0;e--)d[e].fn!==b&&d[e].fn._callback!==b||c&&d[e].ctx!==c||d.splice(e,1);0===d.length?(delete this._callbacks[a],0===Object.keys(this._callbacks).length&&delete this._callbacks):this._callbacks[a]=d}else delete this._callbacks[a]}else delete this._callbacks;return this},once:function(a,b,c){var d=this,e=function(){d.off(a,e,c),b.apply(this,arguments)};return e._callback=b,this.on(a,e,c)},trigger:function(a){if(this._callbacks&&a in this._callbacks)for(var b=this._callbacks[a],c=Array.prototype.slice.call(arguments,1),d=0;d<b.length;d++){var e=b[d];e.fn.apply(e.ctx||this,c)}return this},_isListening:function(a){return!!this._callbacks&&(!a||a in this._callbacks)}},util.extend(tabris,tabris.Events),function(){function a(a,b){var c=a+b;if(c in this._cache)return this._cache[c]?this._cache[c].exports:void 0;if(".json"===c.slice(-5)){var d=tabris.Module.readJSON(c);if(d){if("/package.json"!==b||!d.main)return new tabris.Module(c,this,d).exports;c=a+"/"+d.main;var e=tabris.Module.createLoader(c);if(e)return new tabris.Module(c,this,e).exports}}else{var f=tabris.Module.createLoader(c);if(f)return new tabris.Module(c,this,f).exports}this._cache[c]=!1}function b(a){return"(function (module, exports, require) { "+a+"\n});"}function c(a){return a.slice(0,a.lastIndexOf("/"))}function d(a){for(var b=[],c=a.split("/"),d=0;d<c.length;d++){var e=c[d];if(".."===e){var f=b.pop();if(!f||"."===f)return null}else("."===e?0===b.length:""!==e)&&b.push(e)}return b.join("/")}tabris.Module=function(a,b,c){this.id=a||null,this.parent=b||null,this.exports={},this._cache=this.parent?this.parent._cache:{},a&&(this._cache[a]=this),"function"==typeof c?c(this,this.exports,this.require.bind(this)):c instanceof Object&&(this.exports=c)},tabris.Module.prototype={require:function(b){var g=c(this.id||"./");"."!==b.slice(0,1)&&(g="./node_modules");var h="/"===b.slice(-1)?f:e,i=d(g+"/"+b);if(i)for(var j=0;j<h.length;j++){var k=a.call(this,i,h[j]);if(k)return k}throw new Error("Cannot find module '"+b+"'")}};var e=["",".js",".json","/package.json","/index.js","/index.json"],f=["/package.json","/index.js","/index.json"];tabris.Module.loadMain=function(){try{(new tabris.Module).require("./")}catch(a){console.error("Could not load main module: "+a),console.log(a.stack)}},tabris.Module.createLoader=function(a){var c=tabris._nativeBridge._bridge,d=c.load(a);if(d)try{return c.runInThisContext(b(d),a)}catch(e){if(".js"===a.slice(-3))throw new Error("Could not parse "+a)}},tabris.Module.readJSON=function(a){var b=tabris._nativeBridge._bridge,c=b.load(a);if(c)try{return JSON.parse(c)}catch(d){throw new Error("Could not parse "+a)}}}(),function(){function a(){return"o"+b++}tabris.Proxy=function(b){this.id=b||a(),tabris._proxies[this.id]=this},util.extend(tabris.Proxy.prototype,tabris.Events,{_create:function(a){var b=this.constructor._type||this.type;if(tabris._nativeBridge.create(this.id,b),this.constructor&&this.constructor._initProperties)for(var c in this.constructor._initProperties)this._nativeSet(c,this.constructor._initProperties[c]);return this._setProperties(a),this},append:function(){this._checkDisposed();for(var a=arguments[0]instanceof tabris.ProxyCollection?arguments[0].toArray():arguments,b=0;b<a.length;b++){if(!(a[b]instanceof tabris.Proxy))throw new Error("Cannot append non-widget");a[b]._setParent(this)}return this},appendTo:function(a){if(this._checkDisposed(),a=a instanceof tabris.ProxyCollection?a.first():a,!(a instanceof tabris.Proxy))throw new Error("Cannot append to non-widget");return this._setParent(a),this},get:function(a){return this._checkDisposed(),this._getProperty(a)},set:function(a,b){return this._checkDisposed(),"string"==typeof a?this._setProperty(a,b):this._setProperties(a),this},animate:function(a,b){tabris.Animation.animate(this,a,b)},call:function(a,b){return this._checkDisposed(),tabris._nativeBridge.call(this.id,a,b)},on:function(a,b,c){this._checkDisposed();var d=this._isListening(a);return tabris.Events.on.call(this,a,b,c),d||this._listen(a,!0),this},off:function(a,b,c){return this._checkDisposed(),tabris.Events.off.call(this,a,b,c),this._isListening(a)||this._listen(a,!1),this},dispose:function(){this._isDisposed||(this._destroy(),tabris._nativeBridge.destroy(this.id),this._parent&&this._parent._removeChild(this),this._isDisposed=!0)},parent:function(){return this._parent},children:function(a){return new tabris.ProxyCollection(this._children,a)},_listen:function(a,b){var c=this.constructor&&this.constructor._listen&&this.constructor._listen[a];c?"string"==typeof c?this._nativeListen(c,b):c instanceof Function?c.call(this,b):this._nativeListen(a,b):console.info(this.type+": Unknown event type "+a)},_nativeListen:function(a,b){tabris._nativeBridge.listen(this.id,a,b)},_trigger:function(a,b){var c=this.constructor&&this.constructor._trigger&&this.constructor._trigger[a];c instanceof Function?c.call(this,b):"string"==typeof c?this.trigger(c,b):this.trigger(a,b)},_destroy:function(){this.trigger("dispose",{}),this._destroyChildren(),tabris.Events.off.call(this),delete tabris._proxies[this.id]},_destroyChildren:function(){if(this._children)for(var a=0;a<this._children.length;a++)this._children[a]._destroy()},_addChild:function(a){var b=this.constructor&&this.constructor._supportsChildren;if(b===!1)throw new Error(this.type+" cannot contain children");if("function"==typeof b&&!b(a))throw new Error(this.type+" cannot contain children of type "+a.type);this._children||(this._children=[]),this._children.push(a),this.trigger("addchild",a,this,{})},_removeChild:function(a){if(this._children){var b=this._children.indexOf(a);-1!==b&&this._children.splice(b,1),this.trigger("removechild",a,this,{index:b})}},_checkDisposed:function(){if(this._isDisposed)throw new Error("Object is disposed")},_setProperties:function(a){for(var b in a)this._setProperty(b,a[b])},_setProperty:function(a,b){var c=this._getPropertyType(a),d=this._encodeProperty(b,c,a),e=this.constructor&&this.constructor._setProperty&&this.constructor._setProperty[a];try{e instanceof Function?e.call(this,d):this._nativeSet(a,tabris.PropertyEncoding.proxy(d))}catch(f){console.warn(this.type+': Failed to set property "'+a+'" value: '+f.message)}},_encodeProperty:function(a,b,c){try{if("string"==typeof b&&tabris.PropertyEncoding[b])return tabris.PropertyEncoding[b](a);if(Array.isArray(b)&&tabris.PropertyEncoding[b[0]]){var d=[a].concat(b.slice(1));return tabris.PropertyEncoding[b[0]].apply(window,d)}return a}catch(e){console.warn(this.type+': Unsupported value for property "'+c+'": '+e.message)}},_decodeProperty:function(a,b){if("string"==typeof b&&tabris.PropertyDecoding[b])return tabris.PropertyDecoding[b](a);if(Array.isArray(b)&&tabris.PropertyDecoding[b[0]]){var c=[a].concat(b.slice(1));return tabris.PropertyDecoding[b[0]].apply(window,c)}return a},_getPropertyType:function(a){var b=this.constructor&&this.constructor._properties&&this.constructor._properties[a];return b||this.constructor._properties===!0||console.warn(this.type+': Unknown property "'+a+'"'),b},_nativeSet:function(a,b){tabris._nativeBridge.set(this.id,a,b)},_getProperty:function(a){var b=this._getPropertyType(a),c=this.constructor&&this.constructor._getProperty&&this.constructor._getProperty[a],d=c?c.call(this):this._nativeGet(a);return this._decodeProperty(d,b)},_nativeGet:function(a){return tabris._nativeBridge.get(this.id,a)},_getContainer:function(){return this},_setParent:function(a){tabris._nativeBridge.set(this.id,"parent",tabris.PropertyEncoding.proxy(a._getContainer())),this._parent&&this._parent._removeChild(this),this._parent=a,this._parent._addChild(this)}});var b=1}(),function(){tabris.ProxyCollection=function(a,c){this._array=b(a,c);for(var d=0;d<this._array.length;d++)this[d]=this._array[d];this.length=this._array.length};var a=tabris.ProxyCollection.prototype={first:function(){return this._array[0]},last:function(){return this._array[this._array.length-1]},toArray:function(){return this._array.concat()},forEach:function(a){var b=this;this._array.forEach(function(c,d){a(c,d,b)})},indexOf:function(a){return this._array.indexOf(a)},filter:function(a){return new tabris.ProxyCollection(this._array,a)},get:function(a){return this._array[0]?this._array[0].get(a):void 0},parent:function(){for(var a=[],b=0;b<this._array.length;b++){var c=this._array[b].parent();c&&-1===a.indexOf(c)&&a.push(c)}return a.length?new tabris.ProxyCollection(a):void 0},children:function(a){for(var b=[],c=0;c<this._array.length;c++)b.push.apply(b,this._array[c]._children||[]);return new tabris.ProxyCollection(b,a)},appendTo:function(a){a.append(this)},dispose:function(){for(var a=0;a<this._array.length;a++)this._array[a].dispose()}};["set","animate","on","off"].forEach(function(b){a[b]=function(){for(var a=0;a<this._array.length;a++)this._array[a][b].apply(this._array[a],arguments);return this}});var b=function(a,b){if(!a||0===a.length)return[];if(!b)return a.concat();var d=c(b);return a.filter(d)},c=function(a){return a instanceof Function?a:function(b){return d(b,a)}},d=function(a,b){return b===a.type||"*"===b}}(),function(){tabris.PropertyDecoding={color:function(a){return util.colorArrayToString(a)},font:function(a){return util.fontArrayToString(a)},image:function(a){return util.imageFromArray(a)},bounds:function(a){return{left:a[0],top:a[1],width:a[2],height:a[3]}}}}(),function(){function a(a){return"number"==typeof a&&!isNaN(a)&&a>=0&&1/0!==a}function b(a,b){var c=['Accepting "'];throw c.push(a.join('", "')),c.push('", given was: "',b+'"'),new Error(c.join(""))}function c(a){if("centerX"in a){if("left"in a||"right"in a)return console.warn("Inconsistent layoutData: centerX overrides left and right"),util.omit(a,["left","right"])}else"left"in a||"right"in a||console.warn("Incomplete layoutData: either left, right or centerX should be specified");if("baseline"in a){if("top"in a||"bottom"in a||"centerY"in a)return console.warn("Inconsistent layoutData: baseline overrides top, bottom, and centerY"),util.omit(a,["top","bottom","centerY"])}else if("centerY"in a){if("top"in a||"bottom"in a)return console.warn("Inconsistent layoutData: centerY overrides top and bottom"),util.omit(a,["top","bottom"])}else"top"in a||"bottom"in a||console.warn("Incomplete layoutData: either top, bottom, centerY, or baseline should be specified");return a}tabris.PropertyEncoding={"boolean":function(a){return!!a},string:function(a){return""+a},natural:function(a){if("number"!=typeof a)throw new Error(typeof a+" is not a number: "+a);if(isNaN(a)||1/0===a||a===-1/0)throw new Error("Number is not a valid value: "+a);return 0>a?0:Math.round(a)},integer:function(a){if("number"!=typeof a)throw new Error(typeof a+" is not a number: "+a);if(isNaN(a)||1/0===a||a===-1/0)throw new Error("Number is not a valid value: "+a);return Math.round(a)},choice:function(a,c){return Array.isArray(c)?(-1===c.indexOf(a)&&b(c,a),a):(a in c||b(Object.keys(c),a),c[a])},color:function(a){return"initial"===a?null:util.colorStringToArray(a)},font:function(a){return"initial"===a?null:util.fontStringToArray(a)},image:function(b){if("string"==typeof b&&(b={src:b}),!b||"object"!=typeof b)throw new Error("Not an image: "+b);if("string"!=typeof b.src)throw new Error("image.src is not a string");if(""===b.src)throw new Error("image.src is an empty string");return["scale","width","height"].forEach(function(c){if(c in b&&!a(b[c]))throw new Error("image."+c+" is not a dimension: "+b[c])}),"scale"in b&&("width"in b||"height"in b)&&console.warn("Image scale is ignored if width or height are given"),util.imageToArray(b)},layoutData:function(a){var b=c(a),d={};for(var e in b)d[e]=Array.isArray(b[e])?b[e].map(tabris.PropertyEncoding.proxy):tabris.PropertyEncoding.proxy(b[e]);return d},bounds:function(a){return[a.left,a.top,a.width,a.height]},proxy:function(a){return a instanceof tabris.Proxy?a.id:a instanceof tabris.ProxyCollection&&a[0]?a[0].id:a},nullable:function(a,b){return null===a?a:tabris.PropertyEncoding[b](a)}}}(),function(){tabris.registerWidget=function(a,b){if(b=util.clone(b),b._listen=util.extend({},tabris.registerWidget._defaultListen,b._listen||{}),b._trigger=util.extend({},tabris.registerWidget._defaultTrigger,b._trigger||{}),b._setProperty=util.extend({},tabris.registerWidget._defaultSetProperty,b._setProperty||{}),b._getProperty=util.extend({},tabris.registerWidget._defaultGetProperty,b._getProperty||{}),b._properties!==!0){var c=tabris.registerWidget._defaultCheckProperty;b._properties=util.extend({},c,b._properties||{})}tabris.registerType(a,b)},util.extend(tabris.registerWidget,{_defaultListen:{touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,longpress:!0,dispose:function(){},"change:bounds":"Resize"},_defaultTrigger:{Resize:"change:bounds"},_defaultCheckProperty:{enabled:"boolean",visible:"boolean",layoutData:"layoutData",font:"font",backgroundImage:"image",bounds:"bounds",background:"color",foreground:"color",opacity:!0,transform:!0,highlightOnTouch:"boolean"},_defaultSetProperty:{visible:function(a){this._nativeSet("visibility",a)}},_defaultGetProperty:{visible:function(){return this._nativeGet("visibility")}}}),tabris.registerWidget("Button",{_type:"rwt.widgets.Button",_initProperties:{style:["PUSH"]},_listen:{selection:"Selection"},_trigger:{Selection:"selection"},_properties:{alignment:["choice",["left","right","center"]],image:"image",text:"string"}}),tabris.registerWidget("Canvas",{_type:"rwt.widgets.Canvas",_listen:{addchild:function(){},removechild:function(){}},_supportsChildren:!0}),tabris.registerWidget("CheckBox",{_type:"rwt.widgets.Button",_initProperties:{style:["CHECK"]},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_properties:{text:"string",selection:"boolean"}}),tabris.registerWidget("Combo",{_type:"rwt.widgets.Combo",_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_properties:{items:!0,text:"string",selectionIndex:"natural"}}),tabris.registerWidget("Composite",{_type:"rwt.widgets.Composite",_listen:{addchild:function(){},removechild:function(){}},_supportsChildren:!0}),tabris.registerWidget("ImageView",{_type:"tabris.ImageView",_properties:{image:"image",scaleMode:["choice",["auto","fit","fill","stretch","none"]]}}),tabris.registerWidget("Label",{_type:"rwt.widgets.Label",_initProperties:{style:["WRAP"]},_properties:{alignment:["choice",["left","right","center"]],markupEnabled:"boolean",maxLines:["nullable","natural"],text:"string"},_setProperty:{maxLines:function(a){this._nativeSet("maxLines",0>=a?null:a)}}}),tabris.registerWidget("ProgressBar",{_type:"rwt.widgets.ProgressBar",_properties:{minimum:"integer",maximum:"integer",selection:"integer",state:["choice",["normal","paused","error"]]}}),tabris.registerWidget("RadioButton",{_type:"rwt.widgets.Button",_initProperties:{style:["RADIO"]},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_properties:{text:"string",selection:"boolean"}}),tabris.registerWidget("Slider",{_type:"rwt.widgets.Scale",_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_properties:{minimum:"integer",maximum:"integer",selection:"integer"}}),tabris.registerWidget("Text",{_type:"rwt.widgets.Text",_create:function(b){var c=a[b.type]||a["default"],d=this["super"]("_create",b);return this._nativeSet("style",c),d},_listen:{focus:"FocusIn",blur:"FocusOut",accept:"DefaultSelection","change:text":"Modify"},_trigger:{FocusIn:"focus",FocusOut:"blur",DefaultSelection:"accept",Modify:"change:text"},_properties:{type:["choice",["default","password","search","multiline"]],text:"string",message:"string",editable:"boolean",textLimit:"natural"}});var a={password:["BORDER","SINGLE","PASSWORD"],search:["BORDER","SINGLE","SEARCH"],multiline:["BORDER","MULTI"],"default":["BORDER","SINGLE"]};tabris.registerWidget("ToggleButton",{_type:"rwt.widgets.Button",_initProperties:{style:["TOGGLE"]},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_properties:{text:"string",image:"image",selection:"boolean",alignment:["choice",["left","right","center"]]}}),tabris.registerWidget("Video",{_type:"tabris.widgets.Video",_initProperties:{controls_visible:!0,repeat:!1},_properties:{url:!0}}),tabris.registerWidget("WebView",{_type:"rwt.widgets.Browser",_listen:{load:"Progress"},_trigger:{Progress:"load"},_properties:{url:!0,html:"string"}})}(),tabris.registerType("_Animation",{_type:"tabris.Animation",_listen:{Completion:!0,Progress:!0,Start:!0},_properties:!0}),tabris.Animation={validOptions:{delay:!0,duration:!0,repeat:!0,reverse:!0,easing:!0},animate:function(a,b,c){var d={};for(var e in c)this.validOptions[e]?d[e]=c[e]:console.warn('Invalid animation option "'+e+'"');tabris.create("_Animation",util.extend(d,{target:a,properties:b})).on("Completion",function(){this.dispose()}).call("start")}},function(){var a=function(){};tabris.DOMEvent=function(a,b){this.type=a,this.timeStamp=Date.now(),"undefined"!=typeof b&&("bubbles"in b&&(this.bubbles=b.bubbles),"cancelable"in b&&(this.cancelable=b.cancelable))},tabris.DOMEvent.prototype={NONE:0,CAPTURING_PHASE:1,AT_TARGET:2,BUBBLING_PHASE:3,target:null,currentTarget:null,eventPhase:0,type:"",bubbles:!1,cancelable:!1,defaultPrevented:!1,isTrusted:!1,stopPropagation:a,stopImmediatePropagation:a,preventDefault:a,initEvent:function(a,b,c){this.type=a,this.bubbles=b,this.cancelable=c}},tabris._addDOMEventTargetMethods=function(a){if("function"!=typeof a.addEventListener){var b;a.addEventListener=function(a,c){b||(b=[]),a in b||(b[a]=[]);var d=b[a].indexOf(c);return-1===d&&b[a].push(c),1===b[a].length},a.removeEventListener=function(a,c){if(b&&a in b){var d=b[a].indexOf(c);if(-1!==d)return b[a].splice(d,1),0===b[a].length}return!1},a.dispatchEvent=function(a){if(b&&a.type in b)for(var c=b[a.type],d=0;d<c.length;d++)c[d].call(this,a)}}},"undefined"!=typeof window&&(tabris._addDOMEventTargetMethods(window),window.Event||(window.Event=tabris.DOMEvent))}(),function(){function a(a,b){if("HEAD"===a.tagName&&"SCRIPT"===b.tagName&&b.src){var c=tabris._nativeBridge._bridge,d=c.load(b.src);"string"==typeof d?(c.runInThisContext(d,b.src),"function"==typeof b.onload&&b.onload.call()):"function"==typeof b.onerror&&b.onerror.call()}}var b=function(){},c=function(a){this.tagName=(a||"").toUpperCase(),this.children=[]};c.prototype={setAttribute:b,appendChild:function(b){return this.children.push(b),a(this,b),b},cloneNode:function(){return new c},lastChild:function(){return new c}},tabris._addDOMDocument=function(a){a.document={documentElement:{},createDocumentFragment:function(){return new c},createElement:function(a){return new c(a)},location:{href:""},readyState:"loading",head:new c("head"),getElementsByTagName:function(a){return this.head.children.filter(function(b){return b.tagName===a.toUpperCase()})},createEvent:function(){return new tabris.DOMEvent}},tabris._addDOMEventTargetMethods(a.document),"undefined"==typeof a.location&&(a.location=a.document.location),tabris.load(function(){a.document.readyState="complete";var b=document.createEvent("Events");b.initEvent("DOMContentLoaded",!1,!1),a.document.dispatchEvent(b)}),a.navigator={userAgent:"tabris-js"}},"undefined"==typeof window||window.document||tabris._addDOMDocument(window)}(),function(){tabris.registerType("_Timer",{_type:"tabris.Timer",_listen:{Run:!0},_properties:!0}),tabris._addWindowTimerMethods=function(a){function b(a,b,e){var f=c++;return tabris.load(function(){var c=tabris.create("_Timer",{delay:b,repeat:e}).on("Run",function(){a.call(),e||(c.dispose(),delete d[f])});c.call("start"),d[f]=c}),f}if("function"!=typeof a.setTimeout){var c=0,d={};a.setTimeout=function(a,c){return b(a,c,!1)},a.setInterval=function(a,c){return b(a,c,!0)},a.clearTimeout=a.clearInterval=function(a){var b=d[a];b&&(b.call("cancel",{}),b.dispose(),delete d[a])}}},"undefined"!=typeof window&&tabris._addWindowTimerMethods(window)}(),function(){function a(){var a={};return["model","platform","version","language","scaleFactor"].forEach(function(b){c(a,b,d(b))}),a}function b(){var a={};return c(a,"width",d("screenWidth")),c(a,"height",d("screenHeight")),a}function c(a,b,c){Object.defineProperty(a,b,{get:c,set:function(){}})}function d(a){return function(){return tabris("_Device").get(a)}}function e(a){return function(){return a}}tabris.registerType("_Device",{_type:"tabris.Device",_properties:!0}),tabris._publishDeviceProperties=function(f){if(!("device"in f)){var g=a(),h=b();c(f,"device",e(g)),c(g,"screen",e(h)),"screen"in f||c(f,"screen",e(h)),"navigator"in f&&!("language"in f.navigator)&&c(f.navigator,"language",d("language")),"devicePixelRatio"in f||c(f,"devicePixelRatio",d("scaleFactor"))}},"undefined"!=typeof window&&tabris._publishDeviceProperties(window)}(),tabris.registerType("_Display",{_type:"rwt.widgets.Display",_properties:!0}),tabris.registerWidget("_Shell",{_type:"rwt.widgets.Shell",_listen:{Close:!0},_properties:!0}),tabris.registerType("_UI",{_type:"tabris.UI",_listen:{ShowPage:!0,ShowPreviousPage:!0},_create:function(){return tabris.create("_Display"),this._shell=tabris.create("_Shell",{style:["NO_TRIM"],mode:"maximized",active:!0,visible:!0}).on("Close",function(){this.dispose()}),tabris.Proxy.prototype._create.call(this,{}),this._nativeSet("shell",this._shell.id),this._pages=[],this.on("ShowPage",function(a){var b=tabris._proxies[a.pageId];this._setActivePage(b.widget)}).on("ShowPreviousPage",function(){var a=this._getActivePage();a&&a.close()}),this},_properties:{image:"image",foreground:"color",background:"color",activePage:!0},_getProperty:{activePage:function(){return this._getActivePage()}},_setProperty:{activePage:function(a){this._setActivePage(a)}},_setActivePage:function(a){if(!(a instanceof tabris.Page))throw new Error("Value for activePage is not a page");var b=this._getActivePage();a!==b&&(a.on("dispose",this._pageClosed.bind(this,a)),this._pages.push(a),this._updateActivePage(b,a))},_getActivePage:function(){return this._pages[this._pages.length-1]},_pageClosed:function(a){var b=this._getActivePage();this._pages=this._pages.filter(function(b){return b!==a});var c=this._getActivePage();c!==b&&this._updateActivePage(b,this._getActivePage())},_updateActivePage:function(a,b){a&&a.trigger("disappear"),this._nativeSet("activePage",b._page.id),b.trigger("appear")}}),tabris.load(function(){tabris.ui=tabris.create("_UI")}),function(){tabris.registerWidget("CollectionView",{_type:"tabris.CollectionView",_properties:{itemHeight:"natural",items:!0,initializeCell:!0,refreshEnabled:"boolean",refreshIndicator:"boolean",refreshMessage:"string"},_create:function(){var a=tabris.Proxy.prototype._create.apply(this,arguments);return this._nativeListen("createitem",!0),this._nativeListen("populateitem",!0),this._update(),a},set:function(){var a=tabris.Proxy.prototype.set.apply(this,arguments);return this._update(),a},_setProperty:{items:function(a){this._setItems(a)},initializeCell:function(a){this._initializeCell=a}},_getProperty:{items:function(){return this._items||[]}},_listen:{selection:!0,refresh:!0},_trigger:{createitem:function(){var a=tabris.create("_CollectionCell",{});this.call("addItem",{widget:a.id}),"function"!=typeof this._initializeCell?console.warn("initializeCell callback missing"):this._initializeCell(a)},populateitem:function(a){var b=tabris(a.widget),c=this._items?this._items[a.index]:null;b.trigger("itemchange",c,a.index)},selection:function(a){this.trigger("selection",{index:a.index,item:this._items?this._items[a.index]:null})}},_setItems:function(a){var b=this._items?this._items.length:0;this._items=a;var c={};b>0&&(c.remove=[0,b]);var d=a?a.length:0;d>0&&(c.insert=[0,d]),Object.keys(c).length&&(this._updateOperations=c)},_update:function(){this._updateOperations&&(this.call("update",this._updateOperations),delete this._updateOperations)}}),tabris.registerWidget("_CollectionCell",{_type:"rwt.widgets.Composite",_listen:{itemchange:function(){}},_supportsChildren:!0,dispose:function(){console.warn("CollectionView cells are container-managed, they cannot be disposed of")}})}(),function(){tabris.registerWidget("_ScrollBar",{_type:"rwt.widgets.ScrollBar",_listen:{Selection:!0},_properties:!0}),tabris.registerWidget("ScrollComposite",{_type:"rwt.widgets.ScrolledComposite",_supportsChildren:!0,_listen:{scroll:function(a){a?this._scrollBar.on("Selection",this._scrollBarListener,this):this._scrollBar.off("Selection",this._scrollBarListener,this)},addchild:function(){},removechild:function(){}},_create:function(a){var b=util.omit(a,["direction"]);this["super"]("_create",b);var c="horizontal"===a.direction?["H_SCROLL"]:["V_SCROLL"];return this._nativeSet("style",c),this._scrollBar=tabris.create("_ScrollBar",{style:"horizontal"===a.direction?["HORIZONTAL"]:["VERTICAL"]}),tabris._nativeBridge.set(this._scrollBar.id,"parent",this.id),this._composite=tabris.create("Composite"),tabris._nativeBridge.set(this._composite.id,"parent",this.id),this._nativeSet("content",this._composite.id),this},_scrollBarListener:function(){var a=this._nativeGet("origin");this.trigger("scroll",{x:a[0],y:a[1]})},_getContainer:function(){return this._composite}})}(),function(){var a=["title","image","style","topLevel"];tabris.registerType("_Page",{_type:"tabris.Page",_properties:{image:"image",title:"string",topLevel:"boolean",control:!0,parent:!0,style:!0}}),tabris.registerWidget("Page",{_type:"rwt.widgets.Composite",_listen:{addchild:function(){},removechild:function(){},appear:function(){},disappear:function(){}},_supportsChildren:!0,_properties:{image:!0,title:!0,topLevel:!0},_create:function(b){return this["super"]("_create",util.extend(util.omit(b,a),{layoutData:{left:0,right:0,top:0,bottom:0}})),this._nativeSet("parent",tabris.ui._shell.id),this._page=tabris.create("_Page",util.extend(util.pick(b,a),{parent:tabris.ui,control:this})),this._page.widget=this,this
},dispose:function(){this["super"]("dispose"),this._page.dispose()},open:function(){return tabris.ui.set("activePage",this),this},close:function(){this.dispose()}}),a.forEach(function(a){tabris.Page._setProperty[a]=function(b){this._page.set(a,b)},tabris.Page._getProperty[a]=function(){return this._page.get(a)}})}(),tabris.registerType("Action",{_type:"tabris.Action",_properties:{enabled:"boolean",foreground:"color",image:"image",placementPriority:["choice",{low:"LOW",high:"HIGH",normal:"NORMAL"}],title:"string",visible:"boolean"},_setProperty:{visible:function(a){this._nativeSet("visibility",a)}},_getProperty:{visible:function(){return this._nativeGet("visibility")},placementPriority:function(){var a=this._nativeGet("placementPriority");return a?a.toLowerCase():a}},_listen:{selection:"Selection"},_trigger:{Selection:"selection"},_create:function(a){return this["super"]("_create",a),this._nativeSet("parent",tabris.ui.id),this}}),tabris.registerType("SearchAction",{_type:"tabris.SearchAction",_properties:{enabled:"boolean",foreground:"color",image:"image",placementPriority:["choice",{low:"LOW",high:"HIGH",normal:"NORMAL"}],title:"string",visible:"boolean",proposals:!0},_setProperty:{visible:function(a){this._nativeSet("visibility",a)}},_getProperty:{visible:function(){return this._nativeGet("visibility")},placementPriority:function(){var a=this._nativeGet("placementPriority");return a?a.toLowerCase():a}},_listen:{selection:"Selection",modify:"Modify",submit:"Search"},_trigger:{Selection:"selection",Modify:"modify",Search:"submit"},_create:function(a){return this["super"]("_create",a),this._nativeSet("parent",tabris.ui.id),this}}),function(){function a(a){return-1!==["title","image","badge"].indexOf(a)}function b(a){return"title"===a?"text":a}function c(a){return a instanceof tabris.Tab}function d(a){return!c(a)}tabris.registerType("_TabItem",{_type:"rwt.widgets.TabItem",_properties:!0}),tabris.registerWidget("TabFolder",{_type:"rwt.widgets.TabFolder",_create:function(a){return this["super"]("_create",util.omit(a,"tabBarLocation")),"top"===a.tabBarLocation?this._nativeSet("style",["TOP"]):"bottom"===a.tabBarLocation&&this._nativeSet("style",["BOTTOM"]),this},_properties:{paging:tabris.PropertyEncoding["boolean"],selection:!0},_supportsChildren:function(a){return"Tab"===a.type||"_TabItem"===a.type},_listen:{"change:selection":"Selection"},_trigger:{Selection:"change:selection"},_setProperty:{paging:function(a){this._paging=a,this._nativeSet("data",{paging:a})},selection:function(a){this._nativeSet("selection",a._tabItem.id)}},_getProperty:{paging:function(){return!!this._paging},selection:function(){var a=this._nativeGet("selection");return a?tabris(a)._tab:null}},_getItems:function(){return this._children?this._children.filter(d):[]},children:function(){return this._children?this._children.filter(c):[]}}),tabris.registerWidget("Tab",{_type:"rwt.widgets.Composite",_properties:{title:"string",image:"image",badge:"string"},_listen:{addchild:function(){},removechild:function(){}},_supportsChildren:!0,_create:function(a){return this._itemProps={},this["super"]("_create",a)},_setProperty:{title:function(a){this._setItemProperty("text",a)},image:function(a){this._setItemProperty("image",a)},badge:function(a){this._setItemProperty("badge",a)}},_setItemProperty:function(a,b){this._tabItem?this._tabItem._setProperty(a,b):this._itemProps[a]=b},get:function(c){if(a(c)){if(this._tabItem)return this._tabItem.get(b(c));var d=this._itemProps[b(c)];return"image"===c?tabris.PropertyDecoding.image(d):d}return this["super"]("get",c)},_setParent:function(a){if(!(a instanceof tabris.TabFolder))throw new Error("Tab must be a child of TabFolder");this["super"]("_setParent",a),this._tabItem=tabris.create("_TabItem",util.extend({control:this.id,index:a._getItems().length},this._itemProps)).appendTo(a),this._tabItem._tab=this},_destroy:function(){this._tabItem&&this._tabItem.dispose()}})}(),function(){function a(a){return a}function b(a){if(a in this.values)return a;throw new Error(a)}function c(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function d(){var a={};for(var b in f)a[b]=f[b].init;return a}function e(a,b){var c=f[b];Object.defineProperty(a,b,{get:function(){return c.decode(a._state[b])},set:function(d){try{a._state[b]=c.encode(d),c.addOperations(a,a._state[b])}catch(e){console.warn("Unsupported value for "+b+": "+d)}}})}tabris.registerType("_GC",{_type:"rwt.widgets.GC",_listen:{dispose:function(){}},_properties:{parent:!0}}),tabris.CanvasContext=function(a){this._gc=a,this._state=d(),this._savedStates=[],this._opCodes=[],this._newOpCodes=[],this._operations=[],this._ints=[],this._doubles=[],this._booleans=[],this._strings=[],this.canvas={width:0,height:0,style:{}};for(var b in f)e(this,b);tabris.on("flush",this._flush,this),a.on("dispose",function(){tabris.off("flush",this._flush,this)},this)},tabris.CanvasContext.prototype={save:function(){this._pushOperation("save"),this._savedStates.push(util.clone(this._state))},restore:function(){this._pushOperation("restore"),this._state=this._savedStates.pop()||this._state},beginPath:function(){this._pushOperation("beginPath")},closePath:function(){this._pushOperation("closePath")},lineTo:function(a,b){this._pushOperation("lineTo"),this._doubles.push(a,b)},moveTo:function(a,b){this._pushOperation("moveTo"),this._doubles.push(a,b)},bezierCurveTo:function(a,b,c,d,e,f){this._pushOperation("bezierCurveTo"),this._doubles.push(a,b,c,d,e,f)},quadraticCurveTo:function(a,b,c,d){this._pushOperation("quadraticCurveTo"),this._doubles.push(a,b,c,d)},rect:function(a,b,c,d){this._pushOperation("rect"),this._doubles.push(a,b,c,d)},arc:function(a,b,c,d,e,f){this._pushOperation("arc"),this._doubles.push(a,b,c,d,e),this._booleans.push(!!f)},scale:function(a,b){this._pushOperation("scale"),this._doubles.push(a,b)},rotate:function(a){this._pushOperation("rotate"),this._doubles.push(a)},translate:function(a,b){this._pushOperation("translate"),this._doubles.push(a,b)},transform:function(a,b,c,d,e,f){this._pushOperation("transform"),this._doubles.push(a,b,c,d,e,f)},setTransform:function(a,b,c,d,e,f){this._pushOperation("setTransform"),this._doubles.push(a,b,c,d,e,f)},clearRect:function(a,b,c,d){this._pushOperation("clearRect"),this._doubles.push(a,b,c,d)},fillRect:function(a,b,c,d){this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(a,b,c,d),this.fill()},strokeRect:function(a,b,c,d){this._pushOperation("beginPath"),this._pushOperation("rect"),this._doubles.push(a,b,c,d),this.stroke()},fillText:function(a,b,c){this._pushOperation("fillText"),this._strings.push(a),this._booleans.push(!1,!1,!1),this._doubles.push(b,c)},strokeText:function(a,b,c){this._pushOperation("strokeText"),this._strings.push(a),this._booleans.push(!1,!1,!1),this._doubles.push(b,c)},fill:function(){this._pushOperation("fill")},stroke:function(){this._pushOperation("stroke")},measureText:function(a){return{width:5*a.length+5}},_init:function(a,b){this.canvas.width=a,this.canvas.height=b,this._gc.call("init",{width:a,height:b,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc.call("draw",{packedOperations:[this._newOpCodes,this._operations,this._doubles,this._booleans,this._strings,this._ints]}),this._operations=[],this._doubles=[],this._booleans=[],this._strings=[],this._ints=[],this._newOpCodes=[])},_pushOperation:function(a){this._opCodes.indexOf(a)<0&&(this._newOpCodes.push(a),this._opCodes.push(a)),this._operations.push(this._opCodes.indexOf(a))}},tabris.getContext=function(a,b,c){return a._gc||(a._gc=tabris.create("_GC",{parent:a})),a._ctx||(a._ctx="Android"===device.platform?new tabris.CanvasContext(a._gc):new tabris.LegacyCanvasContext(a._gc)),a._ctx._init(b,c),a._ctx};var f={lineWidth:{init:1,encode:function(a){if(a>0)return a;throw new Error(a)},decode:a,addOperations:function(a,b){a._pushOperation("lineWidth"),a._doubles.push(b)}},lineCap:{init:"butt",values:c(["butt","round","square"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("lineCap"),a._strings.push(b)}},lineJoin:{init:"miter",values:c(["bevel","miter","round"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("lineJoin"),a._strings.push(b)}},fillStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString,addOperations:function(a,b){a._pushOperation("fillStyle"),a._ints.push(b[0],b[1],b[2],b[3])}},strokeStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString,addOperations:function(a,b){a._pushOperation("strokeStyle"),a._ints.push(b[0],b[1],b[2],b[3])}},textAlign:{init:"start",values:c(["start","end","left","right","center"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("textAlign"),a._strings.push(b)}},textBaseline:{init:"alphabetic",values:c(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:b,decode:a,addOperations:function(a,b){a._pushOperation("textBaseline"),a._strings.push(b)}}}}(),function(){function a(a){return a}function b(a){if(a in this.values)return a;throw new Error(a)}function c(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function d(){var a={};for(var b in f)a[b]=f[b].init;return a}function e(a,b){var c=f[b];Object.defineProperty(a,b,{get:function(){return c.decode(a._state[b])},set:function(d){try{a._state[b]=c.encode(d),a._operations.push([b,this._state[b]])}catch(e){console.warn("Unsupported value for "+b+": "+d)}}})}tabris.LegacyCanvasContext=function(a){this._gc=a,this._state=d(),this._savedStates=[],this._operations=[],this.canvas={width:0,height:0,style:{}};for(var b in f)e(this,b);tabris.on("flush",this._flush,this),a.on("dispose",function(){tabris.off("flush",this._flush,this)},this)},tabris.LegacyCanvasContext.prototype={save:function(){this._operations.push(["save"]),this._savedStates.push(util.clone(this._state))},restore:function(){this._operations.push(["restore"]),this._state=this._savedStates.pop()||this._state},beginPath:function(){this._operations.push(["beginPath"])},closePath:function(){this._operations.push(["closePath"])},lineTo:function(a,b){this._operations.push(["lineTo",a,b])},moveTo:function(a,b){this._operations.push(["moveTo",a,b])},bezierCurveTo:function(a,b,c,d,e,f){this._operations.push(["bezierCurveTo",a,b,c,d,e,f])},quadraticCurveTo:function(a,b,c,d){this._operations.push(["quadraticCurveTo",a,b,c,d])},rect:function(a,b,c,d){this._operations.push(["rect",a,b,c,d])},arc:function(a,b,c,d,e,f){this._operations.push(["arc",a,b,c,d,e,!!f])},scale:function(a,b){this._operations.push(["scale",a,b])},rotate:function(a){this._operations.push(["rotate",a])},translate:function(a,b){this._operations.push(["translate",a,b])},transform:function(a,b,c,d,e,f){this._operations.push(["transform",a,b,c,d,e,f])},setTransform:function(a,b,c,d,e,f){this._operations.push(["setTransform",a,b,c,d,e,f])},clearRect:function(a,b,c,d){this._operations.push(["clearRect",a,b,c,d])},fillRect:function(a,b,c,d){this._operations.push(["beginPath"],["rect",a,b,c,d]),this.fill()},strokeRect:function(a,b,c,d){this._operations.push(["beginPath"],["rect",a,b,c,d]),this.stroke()},fillText:function(a,b,c){this._operations.push(["fillText",a,!1,!1,!1,b,c])},strokeText:function(a,b,c){this._operations.push(["strokeText",a,!1,!1,!1,b,c])},fill:function(){this._operations.push(["fill"])},stroke:function(){this._operations.push(["stroke"])},measureText:function(a){return{width:5*a.length+5}},_init:function(a,b){this.canvas.width=a,this.canvas.height=b,this._gc.call("init",{width:a,height:b,font:[["sans-serif"],12,!1,!1],fillStyle:[0,0,0,255],strokeStyle:[0,0,0,255]})},_flush:function(){this._operations.length>0&&(this._gc.call("draw",{operations:this._operations}),this._operations=[])}};var f={lineWidth:{init:1,encode:function(a){if(a>0)return a;throw new Error(a)},decode:a},lineCap:{init:"butt",values:c(["butt","round","square"]),encode:b,decode:a},lineJoin:{init:"miter",values:c(["bevel","miter","round"]),encode:b,decode:a},fillStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString},strokeStyle:{init:[0,0,0,255],encode:util.colorStringToArray,decode:util.colorArrayToString},textAlign:{init:"start",values:c(["start","end","left","right","center"]),encode:b,decode:a},textBaseline:{init:"alphabetic",values:c(["top","hanging","middle","alphabetic","ideographic","bottom"]),encode:b,decode:a}}}(),function(){tabris.registerType("_ClientStore",{_type:"tabris.ClientStore"});var a;tabris.WebStorage=function(){a=tabris("_ClientStore")},tabris.WebStorage.prototype={setItem:function(b,c){if(!b)throw new TypeError("Key argument must be specified to execute 'setItem'");if(!c)throw new TypeError("Value argument must be specified to execute 'setItem'");"string"==typeof b&&"string"==typeof c&&a.call("add",{key:b,value:c})},getItem:function(b){return"string"==typeof b?a.call("get",{key:b}):void 0},removeItem:function(b){"string"==typeof b&&a.call("remove",{keys:[b]})},clear:function(){a.call("clear")}},tabris.StorageEvent=function(a){this.type=a},tabris.StorageEvent.prototype=util.extendPrototype(tabris.DOMEvent,{bubbles:!1,cancelable:!1,key:"",oldValue:null,newValue:null,url:"",storageArea:null}),window.Storage||(window.Storage=tabris.WebStorage,window.localStorage=new tabris.WebStorage)}(),function(){tabris.registerType("_HttpRequest",{_type:"tabris.HttpRequest",_listen:{StateChange:!0,DownloadProgress:!0,UploadProgress:!0},_properties:!0});var a=["loadstart","readystatechange","load","loadend","progress","timeout","abort","error"],b=["progress","loadstart","load","loadend","timeout","abort","error"];tabris.XMLHttpRequest=function(){var a=c(this);e(this,a),f(this,a),g(this,a),i(this,a),h(this,a),j(this,a),m(this,a),n(this,a),o(this,a),k(this,a),d(a),this.open=p(this,a),this.send=q(this,a),this.abort=r(this,a),this.setRequestHeader=s(this,a),this.getResponseHeader=t(this,a),this.getAllResponseHeaders=u(this,a),tabris._addDOMEventTargetMethods(this),tabris._addDOMEventTargetMethods(a.uploadEventTarget)},tabris.XMLHttpRequest.prototype={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},tabris.XMLHttpRequestProgressEvent=function(a){this.type=a},tabris.XMLHttpRequestProgressEvent.prototype=util.extendPrototype(tabris.DOMEvent,{lengthComputable:!1,loaded:0,total:0});var c=function(a){var b={};return b.proxy=null,b.authorRequestHeaders={},b.uploadListeners={},b.uploadEventTarget={},b.timeout=0,b.status=0,b.statusText="",b.responseHeaders="",b.readyState=a.UNSENT,b.responseText="",b.withCredentials=!1,b.responseType="",b.sendInvoked=!1,b.isSynchronous=!1,b.error=!1,b.uploadComplete=!1,b},d=function(c){a.forEach(function(a){c["on"+a]=null}),b.forEach(function(a){c.uploadListeners["on"+a]=null})},e=function(a,b){Object.defineProperty(a,"upload",{get:function(){return b.uploadEventTarget},set:function(){}})},f=function(a,b){Object.defineProperty(a,"readyState",{get:function(){return b.readyState},set:function(){}})},g=function(a,b){Object.defineProperty(a,"timeout",{get:function(){return b.timeout},set:function(a){isNaN(a)||(b.timeout=Math.round(a))}})},h=function(a,b){Object.defineProperty(a,"responseText",{get:function(){if(null===b.responseText)return"";if("string"!=typeof b.responseText)throw new Error("IllegalStateError: responseText is not a string");return b.readyState!==a.LOADING&&b.readyState!==a.DONE?"":b.error?"":b.responseText},set:function(){}})},i=function(a,b){Object.defineProperty(a,"response",{get:function(){return b.readyState!==a.LOADING&&b.readyState!==a.DONE?"":b.error?"":b.responseText},set:function(){}})},j=function(a,b){Object.defineProperty(a,"responseType",{get:function(){return b.responseType},set:function(c){if(b.readyState===a.LOADING||b.readyState===a.DONE)throw new Error("InvalidStateError: state must not be 'LOADING' or 'DONE' when setting responseType");if(!(["arraybuffer","blob","document","json","text"].indexOf(c)<0)){if(["arraybuffer","blob","document","json"].indexOf(c)>-1)throw new Error("Only the 'text' response type is supported.");b.responseType=c}}})},k=function(c,d){a.forEach(function(a){l(a,c,d)}),b.forEach(function(a){l(a,d.uploadEventTarget,d.uploadListeners)})},l=function(a,b,c){var d="on"+a;Object.defineProperty(b,d,{get:function(){return c[d]},set:function(e){"function"==typeof e&&(b.removeEventListener(a,b[d]),c[d]=e,b.addEventListener(a,b[d]))}})},m=function(a,b){Object.defineProperty(a,"status",{get:function(){return[a.OPENED,a.UNSENT].indexOf(b.readyState)>-1?0:b.error?0:b.status},set:function(){}})},n=function(a,b){Object.defineProperty(a,"statusText",{get:function(){return[a.OPENED,a.UNSENT].indexOf(b.readyState)>-1?"":b.error?"":b.statusText},set:function(){}})},o=function(a,b){Object.defineProperty(a,"withCredentials",{set:function(c){if(b.readyState!==a.UNSENT&&b.readyState!==a.OPENED)throw new Error("InvalidStateError: state must be 'UNSENT' or 'OPENED' when setting withCredentials");if(b.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to set 'withCredentials'");"boolean"==typeof c&&(b.withCredentials=c)},get:function(){return b.withCredentials}})},p=function(a,b){return function(c,d,e,f,g){var h={};y(c,d),h.source=d;var i=d.replace(/.*?:\/\//g,"");if(h.isRelative=!new RegExp("^(?:[a-z]+:)?//","i").test(d),h.userdata=i.substring(0,i.indexOf("@")),"undefined"==typeof e&&(e=!0,f=null,g=null),!e)throw new Error("Only asynchronous request supported.");h.isRelative&&f&&g&&(h.userdata=f+":"+g),b.requestMethod=c,b.requestUrl=h,b.isSynchronous=!e,b.authorRequestHeaders={},b.sendInvoked=!1,b.responseText=null,b.readyState!==a.OPENED&&(b.readyState=a.OPENED,J("readystatechange",a))}},q=function(a,b){return function(c){if(b.proxy=tabris.create("_HttpRequest"),b.proxy.on("StateChange",function(c){w(c,a,b)}),b.proxy.on("DownloadProgress",function(b){E("progress",a,b.lengthComputable,b.loaded,b.total)}),b.proxy.on("UploadProgress",function(b){E("progress",a.upload,b.lengthComputable,b.loaded,b.total)}),b.readyState!==a.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'send'");if(b.sendInvoked)throw new Error("InvalidStateError: 'send' invoked, failed to execute 'send'");["GET","HEAD"].indexOf(b.requestMethod)>-1&&(c=null),b.requestBody=c,b.error=b.uploadComplete=!1,c||(b.uploadComplete=!0),b.withCredentials&&b.requestUrl.userdata&&a.setRequestHeader("Authorization","Basic "+b.requestUrl.userdata),b.sendInvoked=!0,E("loadstart",a),b.uploadComplete||E("loadstart",a.upload),b.proxy.call("send",{url:b.requestUrl.source,method:b.requestMethod,timeout:a.timeout,headers:b.authorRequestHeaders,data:b.requestBody})}},r=function(a,b){return function(){b.proxy&&b.proxy.call("abort"),[a.UNSENT,a.OPENED].indexOf(b.readyState)>-1&&!b.sendInvoked||b.readyState===a.DONE||(J("readystatechange",a),b.uploadComplete||(b.uploadComplete=!0,F(a.upload)),F(a)),b.readyState=a.UNSENT}},s=function(a,b){return function(c,d){if(b.readyState!==a.OPENED)throw new Error("InvalidStateError: Object's state must be 'OPENED', failed to execute 'setRequestHeader'");if(b.sendInvoked)throw new Error("InvalidStateError: cannot set request header if 'send()' invoked and request not completed");if(!A(c))throw new TypeError("Invalid HTTP header name, failed to execute 'open'");if(!B(d))throw new TypeError("Invalid HTTP header value, failed to execute 'open'");if(C(c))throw new Error("Cannot set forbidden header '"+c+"'");b.authorRequestHeaders[c]=c in b.authorRequestHeaders?b.authorRequestHeaders[c]+", "+d:d}},t=function(a,b){return function(c){if([a.UNSENT,a.OPENED].indexOf(a.readyState)>-1)return null;if(b.error)return null;var d=["set-cookie","set-cookie2","status"];if(d.indexOf(c.toLowerCase())>-1)return null;for(var e in b.responseHeaders)if(e.toLowerCase()===c.toLowerCase())return b.responseHeaders[e];return null}},u=function(a,b){return function(){return[a.UNSENT,a.OPENED].indexOf(a.readyState)>-1?"":b.error?"":v(b.responseHeaders)}},v=function(a){var b=[],c=["set-cookie","set-cookie2","status"];for(var d in a)c.indexOf(d.toLowerCase())<0&&b.push(d+": "+a[d]);return b.join("\n")},w=function(a,b,c){switch(a.state){case"headers":c.readyState=b.HEADERS_RECEIVED,c.status=a.code,c.statusText=a.message,c.responseHeaders=a.headers,J("readystatechange",b),c.uploadComplete=!0,H(b.upload);break;case"loading":c.readyState=b.LOADING,J("readystatechange",b);break;case"finished":c.responseText=a.response,c.readyState=b.DONE,J("readystatechange",b),H(b),H(b.upload),c.proxy.dispose(),c.proxy=null;break;case"error":x("error",b,c);break;case"timeout":x("timeout",b,c);break;case"abort":x("abort",b,c)}},x=function(a,b,c){c.error=!0,c.readyState=b.DONE,J("readystatechange",b),G(a,b),c.uploadComplete||(c.uploadComplete=!0,G(a,b.upload)),c.proxy.dispose(),c.proxy=null},y=function(a,b){if(!a)throw new TypeError("Method argument should be specified to execute 'open'");if(!b)throw new TypeError("URL argument should be specified to execute 'open'");z(a)},z=function(a){if(!A(a))throw new TypeError("Invalid HTTP method, failed to execute 'open'");var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"],c=a.toUpperCase();b.indexOf(c)>=0&&(a=c);var d=["CONNECT","TRACE","TRACK"];if(d.indexOf(a)>=0)throw new Error("SecurityError: '"+a+"' HTTP method is not secure, failed to execute 'open'")},A=function(a){var b=["(",")","<",">","@",",",";",":","\\",'"',"/","[","]","?","=","{","}"];return!(/[^\x21-\x7E]/.test(a)||b.indexOf(a)>=0)},B=function(a){return!(!/[*A-z\u00C0-\u00ff]+/g.test(a)||a.indexOf("\n")>-1||a.indexOf("\r")>-1)},C=function(a){return D.indexOf(a.toLowerCase())>-1},D=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],E=function(a,b,c,d,e){b.dispatchEvent(I(a,b,c,d,e))},F=function(a){E("progress",a),E("abort",a),E("loadend",a)},G=function(a,b){E("progress",b),E(a,b),E("loadend",b)},H=function(a){E("load",a),E("loadend",a)},I=function(a,b,c,d,e){var f=new tabris.XMLHttpRequestProgressEvent(a);return f.currentTarget=f.target=b,c&&(f.lengthComputable=c),d&&(f.loaded=d),e&&(f.total=e),f},J=function(a,b){var c=K(a,b);b.dispatchEvent(c)},K=function(a,b){var c=new tabris.DOMEvent(a);return c.currentTarget=c.target=b,c};"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=tabris.XMLHttpRequest,window.XMLHttpRequestProgressEvent=tabris.XMLHttpRequestProgressEvent)}(),function(){var PLATFORM_VERSION_BUILD_LABEL="3.6.0",require,define;!function(){function a(a){var b=a.factory,c=function(b){var c=b;return"."===b.charAt(0)&&(c=a.id.slice(0,a.id.lastIndexOf(e))+e+b.slice(2)),require(c)};return a.exports={},delete a.factory,b(c,a.exports,a),a.exports}var b={},c=[],d={},e=".";require=function(e){if(!b[e])throw"module "+e+" not found";if(e in d){var f=c.slice(d[e]).join("->")+"->"+e;throw"Cycle in require graph: "+f}if(b[e].factory)try{return d[e]=c.length,c.push(e),a(b[e])}finally{delete d[e],c.pop()}return b[e].exports},define=function(a,c){if(b[a])throw"module "+a+" already defined";b[a]={id:a,factory:c}},define.remove=function(a){delete b[a]},define.moduleMap=b}(),"object"==typeof module&&"function"==typeof require&&(module.exports.require=require,module.exports.define=define),define("cordova",function(a,b,c){function d(a,b){var c=document.createEvent("Events");if(c.initEvent(a,!1,!1),b)for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}var e=a("cordova/channel"),f=a("cordova/platform"),g=document.addEventListener,h=document.removeEventListener,i=window.addEventListener,j=window.removeEventListener,k={},l={};document.addEventListener=function(a,b,c){var d=a.toLowerCase();"undefined"!=typeof k[d]?k[d].subscribe(b):g.call(document,a,b,c)},window.addEventListener=function(a,b,c){var d=a.toLowerCase();"undefined"!=typeof l[d]?l[d].subscribe(b):i.call(window,a,b,c)},document.removeEventListener=function(a,b,c){var d=a.toLowerCase();"undefined"!=typeof k[d]?k[d].unsubscribe(b):h.call(document,a,b,c)},window.removeEventListener=function(a,b,c){var d=a.toLowerCase();"undefined"!=typeof l[d]?l[d].unsubscribe(b):j.call(window,a,b,c)};var m={define:define,require:a,version:PLATFORM_VERSION_BUILD_LABEL,platformVersion:PLATFORM_VERSION_BUILD_LABEL,platformId:f.id,addWindowEventHandler:function(a){return l[a]=e.create(a)},addStickyDocumentEventHandler:function(a){return k[a]=e.createSticky(a)},addDocumentEventHandler:function(a){return k[a]=e.create(a)},removeWindowEventHandler:function(a){delete l[a]},removeDocumentEventHandler:function(a){delete k[a]},getOriginalHandlers:function(){return{document:{addEventListener:g,removeEventListener:h},window:{addEventListener:i,removeEventListener:j}}},fireDocumentEvent:function(a,b,c){var e=d(a,b);"undefined"!=typeof k[a]?c?k[a].fire(e):setTimeout(function(){"deviceready"==a&&document.dispatchEvent(e),k[a].fire(e)},0):document.dispatchEvent(e)},fireWindowEvent:function(a,b){var c=d(a,b);"undefined"!=typeof l[a]?setTimeout(function(){l[a].fire(c)},0):window.dispatchEvent(c)},callbackId:Math.floor(2e9*Math.random()),callbacks:{},callbackStatus:{NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9},callbackSuccess:function(a,b){m.callbackFromNative(a,!0,b.status,[b.message],b.keepCallback)},callbackError:function(a,b){m.callbackFromNative(a,!1,b.status,[b.message],b.keepCallback)},callbackFromNative:function(a,b,c,d,e){try{var f=m.callbacks[a];f&&(b&&c==m.callbackStatus.OK?f.success&&f.success.apply(null,d):f.fail&&f.fail.apply(null,d),e||delete m.callbacks[a])}catch(g){var h="Error in "+(b?"Success":"Error")+" callbackId: "+a+" : "+g;throw console&&console.log&&console.log(h),m.fireWindowEvent("cordovacallbackerror",{message:h}),g}},addConstructor:function(a){e.onCordovaReady.subscribe(function(){try{a()}catch(b){console.log("Failed to run constructor: "+b)}})}};c.exports=m}),define("cordova/argscheck",function(a,b,c){function d(a,b){return/.*?\((.*?)\)/.exec(a)[1].split(", ")[b]}function e(a,b,c,e){if(h.enableChecks){for(var f,j=null,k=0;k<a.length;++k){var l=a.charAt(k),m=l.toUpperCase(),n=c[k];if("*"!=l&&(f=g.typeName(n),(null!==n&&void 0!==n||l!=m)&&f!=i[m])){j="Expected "+i[m];break}}if(j)throw j+=", but got "+f+".",j='Wrong type for parameter "'+d(e||c.callee,k)+'" of '+b+": "+j,"undefined"==typeof jasmine&&console.error(j),TypeError(j)}}function f(a,b){return void 0===a?b:a}var g=(a("cordova/exec"),a("cordova/utils")),h=c.exports,i={A:"Array",D:"Date",N:"Number",S:"String",F:"Function",O:"Object"};h.checkArgs=e,h.getValue=f,h.enableChecks=!0}),define("cordova/base64",function(a,b){function c(a){for(var b,c=a.byteLength,d="",e=g(),h=0;c-2>h;h+=3)b=(a[h]<<16)+(a[h+1]<<8)+a[h+2],d+=e[b>>12],d+=e[4095&b];return c-h==2?(b=(a[h]<<16)+(a[h+1]<<8),d+=e[b>>12],d+=f[(4095&b)>>6],d+="="):c-h==1&&(b=a[h]<<16,d+=e[b>>12],d+="=="),d}var d=b;d.fromArrayBuffer=function(a){var b=new Uint8Array(a);return c(b)},d.toArrayBuffer=function(a){for(var b="undefined"!=typeof atob?atob(a):new Buffer(a,"base64").toString("binary"),c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0,f=b.length;f>e;e++)d[e]=b.charCodeAt(e);return c};var e,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=function(){e=[];for(var a=0;64>a;a++)for(var b=0;64>b;b++)e[64*a+b]=f[a]+f[b];return g=function(){return e},e}}),define("cordova/builder",function(a,b){function c(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.apply(c,[a[d],d])}function d(a,c,d){b.replaceHookForTesting(a,c);var e=!1;try{a[c]=d}catch(f){e=!0}(e||a[c]!==d)&&h.defineGetter(a,c,function(){return d})}function e(a,b,c,e){e?h.defineGetter(a,b,function(){return console.log(e),delete a[b],d(a,b,c),c}):d(a,b,c)}function f(b,d,i,j){c(d,function(c,d){try{var k=c.path?a(c.path):{};i?("undefined"==typeof b[d]?e(b,d,k,c.deprecated):"undefined"!=typeof c.path&&(j?g(b[d],k):e(b,d,k,c.deprecated)),k=b[d]):"undefined"==typeof b[d]?e(b,d,k,c.deprecated):k=b[d],c.children&&f(k,c.children,i,j)}catch(l){h.alert("Exception building Cordova JS globals: "+l+' for key "'+d+'"')}})}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a.prototype&&a.prototype.constructor===a?d(a.prototype,c,b[c]):"object"==typeof b[c]&&"object"==typeof a[c]?g(a[c],b[c]):d(a,c,b[c]))}var h=a("cordova/utils");b.buildIntoButDoNotClobber=function(a,b){f(b,a,!1,!1)},b.buildIntoAndClobber=function(a,b){f(b,a,!0,!1)},b.buildIntoAndMerge=function(a,b){f(b,a,!0,!0)},b.recursiveMerge=g,b.assignOrWrapInDeprecateGetter=e,b.replaceHookForTesting=function(){}}),define("cordova/channel",function(a,b,c){function d(a){if("function"!=typeof a)throw"Function required as first argument!"}var e=a("cordova/utils"),f=1,g=function(a,b){this.type=a,this.handlers={},this.state=b?1:0,this.fireArgs=null,this.numHandlers=0,this.onHasSubscribersChange=null},h={join:function(a,b){for(var c=b.length,d=c,e=function(){--d||a()},f=0;c>f;f++){if(0===b[f].state)throw Error("Can only use join with sticky channels.");b[f].subscribe(e)}c||a()},create:function(a){return h[a]=new g(a,!1)},createSticky:function(a){return h[a]=new g(a,!0)},deviceReadyChannelsArray:[],deviceReadyChannelsMap:{},waitForInitialization:function(a){if(a){var b=h[a]||this.createSticky(a);this.deviceReadyChannelsMap[a]=b,this.deviceReadyChannelsArray.push(b)}},initializationComplete:function(a){var b=this.deviceReadyChannelsMap[a];b&&b.fire()}};g.prototype.subscribe=function(a,b){if(d(a),2==this.state)return void a.apply(b||this,this.fireArgs);var c=a,g=a.observer_guid;"object"==typeof b&&(c=e.close(b,a)),g||(g=""+f++),c.observer_guid=g,a.observer_guid=g,this.handlers[g]||(this.handlers[g]=c,this.numHandlers++,1==this.numHandlers&&this.onHasSubscribersChange&&this.onHasSubscribersChange())},g.prototype.unsubscribe=function(a){d(a);var b=a.observer_guid,c=this.handlers[b];c&&(delete this.handlers[b],this.numHandlers--,0===this.numHandlers&&this.onHasSubscribersChange&&this.onHasSubscribersChange())},g.prototype.fire=function(){var a=Array.prototype.slice.call(arguments);if(1==this.state&&(this.state=2,this.fireArgs=a),this.numHandlers){var b=[];for(var c in this.handlers)b.push(this.handlers[c]);for(var d=0;d<b.length;++d)b[d].apply(this,a);2==this.state&&this.numHandlers&&(this.numHandlers=0,this.handlers={},this.onHasSubscribersChange&&this.onHasSubscribersChange())}},h.createSticky("onDOMContentLoaded"),h.createSticky("onNativeReady"),h.createSticky("onCordovaReady"),h.createSticky("onPluginsReady"),h.createSticky("onDeviceReady"),h.create("onResume"),h.create("onPause"),h.createSticky("onDestroy"),h.waitForInitialization("onCordovaReady"),h.waitForInitialization("onDOMContentLoaded"),c.exports=h}),define("cordova/exec",function(require,exports,module){function tabrisExec(){var a,b,c,d,e,f,g=null;if("string"!=typeof arguments[0])a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],g="INVALID";else try{return f=arguments[0].split("."),d=f.pop(),c=f.join("."),e=Array.prototype.splice.call(arguments,1),void console.log('The old format of this exec call has been removed (deprecated since 2.1). Change to: cordova.exec(null, null, "'+c+'", "'+d+'",'+JSON.stringify(e)+");")}catch(h){}e=e||[],(a||b)&&(g=c+cordova.callbackId++,cordova.callbacks[g]={success:a,fail:b}),cordovaBridge.exec(c,d,e,g)}var cordovaBridge=function(){var pluginProxies={},fakeWindow=function(){function a(a){this.message=a}var b={},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return a.prototype=new Error,a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var d,e,f=String(b),g=0,h=c,i="";f.charAt(0|g)||(h="=",g%1);i+=h.charAt(63&d>>8-g%1*8)){if(e=f.charCodeAt(g+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");d=d<<8|e}return i
}),b.atob||(b.atob=function(b){var d=String(b).replace(/=+$/,"");if(d.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,g=0,h=0,i="";f=d.charAt(h++);~f&&(e=g%4?64*e+f:f,g++%4)?i+=String.fromCharCode(255&e>>(-2*g&6)):0)f=c.indexOf(f);return i}),b}(),buildPayload=function(a,b){var c=b.charAt(0);if("s"==c)a.push(b.slice(1));else if("t"==c)a.push(!0);else if("f"==c)a.push(!1);else if("N"==c)a.push(null);else if("n"==c)a.push(+b.slice(1));else if("A"==c){for(var d=b.slice(1),e=fakeWindow.atob(d),f=new Uint8Array(e.length),g=0;g<e.length;g++)f[g]=e.charCodeAt(g);a.push(f.buffer)}else if("S"==c)a.push(fakeWindow.atob(b.slice(1)));else if("M"==c)for(var h=b.slice(1);""!==h;){var i=h.indexOf(" "),j=+h.slice(0,i),k=h.substr(i+1,j);h=h.slice(i+j+1),buildPayload(a,k)}else a.push(JSON.parse(b))},processAndroidEvent=function(event){var message=event.message;try{var firstChar=message.charAt(0);if("J"==firstChar)eval(message.slice(1));else if("S"==firstChar||"F"==firstChar){var success="S"==firstChar,keepCallback="1"==message.charAt(1),spaceIdx=message.indexOf(" ",2),status=+message.slice(2,spaceIdx),nextSpaceIdx=message.indexOf(" ",spaceIdx+1),callbackId=message.slice(spaceIdx+1,nextSpaceIdx),payloadMessage=message.slice(nextSpaceIdx+1),payload=[];buildPayload(payload,payloadMessage),cordova.callbackFromNative(callbackId,success,status,payload,keepCallback)}else console.log("processMessage failed: invalid message: "+JSON.stringify(message))}catch(e){console.log("processMessage failed: Error: "+e),console.log("processMessage failed: Stack: "+e.stack),console.log("processMessage failed: Message: "+message)}},massageMessageNativeToJs=function(a){if("ArrayBuffer"==a.CDVType){var b=function(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer},c=function(a){return b(atob(a))};a=c(a.data)}return a},createIOSMessage=function(a){var b=[];return a&&a.hasOwnProperty("CDVType")?"MultiPart"==a.CDVType?a.messages.forEach(function(a){b.push(massageMessageNativeToJs(a))}):b.push(massageMessageNativeToJs(a)):b.push(a),b},processIOSEvent=function(a){var b=a.callbackId,c=a.status,d=a.keepCallback,e=0===c||1===c,f=createIOSMessage(a.message);cordova.callbackFromNative(b,e,c,f,d)},handleFinish=function(a){var b=window.device.platform;"iOS"===b?processIOSEvent(a):"Android"===b&&processAndroidEvent(a)},getPlugin=function(a){var b=pluginProxies[a];return"undefined"==typeof b&&(b=tabris.create("cordova.plugin",{service:a}),b.on("finish",function(a){handleFinish(a)}),pluginProxies[a]=b),b};return{exec:function(a,b,c,d){var e=getPlugin(a);e.call("exec",{action:b,arguments:c,callbackId:d})}}}();module.exports=tabrisExec}),define("cordova/exec/proxy",function(a,b,c){var d={};c.exports={add:function(a,b){return console.log("adding proxy for "+a),d[a]=b,b},remove:function(a){var b=d[a];return delete d[a],d[a]=null,b},get:function(a,b){return d[a]?d[a][b]:null}}}),define("cordova/init",function(a){function b(a){for(var b=0;b<a.length;++b)2!=a[b].state&&console.log("Channel not fired: "+a[b].type)}function c(a){var b=function(){};b.prototype=a;var c=new b;if(b.bind)for(var d in a)"function"==typeof a[d]?c[d]=a[d].bind(a):!function(b){i.defineGetterSetter(c,d,function(){return a[b]})}(d);return c}var d=a("cordova/channel"),e=a("cordova"),f=a("cordova/modulemapper"),g=a("cordova/platform"),h=a("cordova/pluginloader"),i=a("cordova/utils"),j=[d.onNativeReady,d.onPluginsReady];window.setTimeout(function(){2!=d.onDeviceReady.state&&(console.log("deviceready has not fired after 5 seconds."),b(j),b(d.deviceReadyChannelsArray))},5e3),window.navigator&&(window.navigator=c(window.navigator)),window.console||(window.console={log:function(){}}),window.console.warn||(window.console.warn=function(a){this.log("warn: "+a)}),d.onPause=e.addDocumentEventHandler("pause"),d.onResume=e.addDocumentEventHandler("resume"),d.onDeviceReady=e.addStickyDocumentEventHandler("deviceready"),"complete"==document.readyState||"interactive"==document.readyState?d.onDOMContentLoaded.fire():document.addEventListener("DOMContentLoaded",function(){d.onDOMContentLoaded.fire()},!1),window._nativeReady&&d.onNativeReady.fire(),f.clobbers("cordova","cordova"),f.clobbers("cordova/exec","cordova.exec"),f.clobbers("cordova/exec","Cordova.exec"),g.bootstrap&&g.bootstrap(),setTimeout(function(){h.load(function(){d.onPluginsReady.fire()})},0),d.join(function(){f.mapModules(window),g.initialize&&g.initialize(),d.onCordovaReady.fire(),d.join(function(){a("cordova").fireDocumentEvent("deviceready")},d.deviceReadyChannelsArray)},j)}),define("cordova/init_b",function(a){function b(a){for(var b=0;b<a.length;++b)2!=a[b].state&&console.log("Channel not fired: "+a[b].type)}function c(a){var b=function(){};b.prototype=a;var c=new b;if(b.bind)for(var d in a)"function"==typeof a[d]?c[d]=a[d].bind(a):!function(b){g.defineGetterSetter(c,d,function(){return a[b]})}(d);return c}var d=a("cordova/channel"),e=a("cordova"),f=a("cordova/platform"),g=a("cordova/utils"),h=[d.onDOMContentLoaded,d.onNativeReady];e.exec=a("cordova/exec"),window.setTimeout(function(){2!=d.onDeviceReady.state&&(console.log("deviceready has not fired after 5 seconds."),b(h),b(d.deviceReadyChannelsArray))},5e3),window.navigator&&(window.navigator=c(window.navigator)),window.console||(window.console={log:function(){}}),window.console.warn||(window.console.warn=function(a){this.log("warn: "+a)}),d.onPause=e.addDocumentEventHandler("pause"),d.onResume=e.addDocumentEventHandler("resume"),d.onDeviceReady=e.addStickyDocumentEventHandler("deviceready"),"complete"==document.readyState||"interactive"==document.readyState?d.onDOMContentLoaded.fire():document.addEventListener("DOMContentLoaded",function(){d.onDOMContentLoaded.fire()},!1),window._nativeReady&&d.onNativeReady.fire(),f.bootstrap&&f.bootstrap(),d.join(function(){f.initialize&&f.initialize(),d.onCordovaReady.fire(),d.join(function(){a("cordova").fireDocumentEvent("deviceready")},d.deviceReadyChannelsArray)},h)}),define("cordova/modulemapper",function(a,b){function c(a,b,c,d){if(!(b in h))throw new Error("Module "+b+" does not exist.");e.push(a,b,c),d&&(f[c]=d)}function d(a,b){if(!a)return b;for(var c,d=a.split("."),e=b,f=0;c=d[f];++f)e=e[c]=e[c]||{};return e}var e,f,g=a("cordova/builder"),h=define.moduleMap;b.reset=function(){e=[],f={}},b.clobbers=function(a,b,d){c("c",a,b,d)},b.merges=function(a,b,d){c("m",a,b,d)},b.defaults=function(a,b,d){c("d",a,b,d)},b.runs=function(a){c("r",a,null)},b.mapModules=function(b){var c={};b.CDV_origSymbols=c;for(var h=0,i=e.length;i>h;h+=3){var j=e[h],k=e[h+1],l=a(k);if("r"!=j){var m=e[h+2],n=m.lastIndexOf("."),o=m.substr(0,n),p=m.substr(n+1),q=m in f?"Access made to deprecated symbol: "+m+". "+q:null,r=d(o,b),s=r[p];"m"==j&&s?g.recursiveMerge(s,l):("d"==j&&!s||"d"!=j)&&(m in c||(c[m]=s),g.assignOrWrapInDeprecateGetter(r,p,l,q))}}},b.getOriginalSymbol=function(a,b){var c=a.CDV_origSymbols;if(c&&b in c)return c[b];for(var d=b.split("."),e=a,f=0;f<d.length;++f)e=e&&e[d[f]];return e},b.reset()}),define("cordova/platform",function(a,b,c){c.exports={id:"tabris-js",bootstrap:function(){tabris.load(function(){tabris.registerType("cordova.plugin",{_properties:!0,_listen:{finish:!0}});var a=document.createElement("script");document.head.appendChild(a),a.src="./cordova.js",cordova.require("cordova/channel").onNativeReady.fire(),tabris._setEntryPoint(function(){document.addEventListener("deviceready",tabris.Module.loadMain,!1)})})}}}),define("cordova/pluginloader",function(a,b){function c(a,c,d,e){e=e||d,a in define.moduleMap?d():b.injectScript(c,function(){a in define.moduleMap?d():e()},e)}function d(a,b){for(var c,d=0;c=a[d];d++){if(c.clobbers&&c.clobbers.length)for(var e=0;e<c.clobbers.length;e++)g.clobbers(c.id,c.clobbers[e]);if(c.merges&&c.merges.length)for(var f=0;f<c.merges.length;f++)g.merges(c.id,c.merges[f]);c.runs&&g.runs(c.id)}b()}function e(a,b,e){function f(){--g||d(b,e)}var g=b.length;if(!g)return void e();for(var h=0;h<b.length;h++)c(b[h].id,a+b[h].file,f)}function f(){for(var a=null,b=document.getElementsByTagName("script"),c="/cordova.js",d=b.length-1;d>-1;d--){var e=b[d].src.replace(/\?.*$/,"");if(e.indexOf(c)==e.length-c.length){a=e.substring(0,e.length-c.length)+"/";break}}return a}{var g=a("cordova/modulemapper");a("cordova/urlutil")}b.injectScript=function(a,b,c){var d=document.createElement("script");d.onload=b,d.onerror=c,d.src=a,document.head.appendChild(d)},b.load=function(b){var d=f();null===d&&(console.log("Could not find cordova.js script tag. Plugin loading may fail."),d=""),c("cordova/plugin_list",d+"cordova_plugins.js",function(){var c=a("cordova/plugin_list");e(d,c,b)},b)}}),define("cordova/urlutil",function(a,b){b.makeAbsolute=function(a){var b=document.createElement("a");return b.href=a,b.href}}),define("cordova/utils",function(a,b){function c(a){for(var b="",c=0;a>c;c++){var d=parseInt(256*Math.random(),10).toString(16);1==d.length&&(d="0"+d),b+=d}return b}var d=b;d.defineGetterSetter=function(a,b,c,d){if(Object.defineProperty){var e={get:c,configurable:!0};d&&(e.set=d),Object.defineProperty(a,b,e)}else a.__defineGetter__(b,c),d&&a.__defineSetter__(b,d)},d.defineGetter=d.defineGetterSetter,d.arrayIndexOf=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=a.length,d=0;c>d;++d)if(a[d]==b)return d;return-1},d.arrayRemove=function(a,b){var c=d.arrayIndexOf(a,b);return-1!=c&&a.splice(c,1),-1!=c},d.typeName=function(a){return Object.prototype.toString.call(a).slice(8,-1)},d.isArray=function(a){return"Array"==d.typeName(a)},d.isDate=function(a){return"Date"==d.typeName(a)},d.clone=function(a){if(!a||"function"==typeof a||d.isDate(a)||"object"!=typeof a)return a;var b,c;if(d.isArray(a)){for(b=[],c=0;c<a.length;++c)b.push(d.clone(a[c]));return b}b={};for(c in a)c in b&&b[c]==a[c]||(b[c]=d.clone(a[c]));return b},d.close=function(a,b,c){return"undefined"==typeof c?function(){return b.apply(a,arguments)}:function(){return b.apply(a,c)}},d.createUUID=function(){return c(4)+"-"+c(2)+"-"+c(2)+"-"+c(2)+"-"+c(6)},d.extend=function(){var a=function(){};return function(b,c){a.prototype=c.prototype,b.prototype=new a,b.__super__=c.prototype,b.prototype.constructor=b}}(),d.alert=function(a){window.alert?window.alert(a):console&&console.log&&console.log(a)}}),window.cordova=require("cordova"),require("cordova/init")}();